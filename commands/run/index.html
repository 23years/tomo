<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>run - Tomo</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "run";
    var mkdocs_page_input_path = "commands/run.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Tomo</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../configuration/">Configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Commands</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../init/">init</a>
                </li>
                <li class="">
                    
    <a class="" href="../setup/">setup</a>
                </li>
                <li class="">
                    
    <a class="" href="../deploy/">deploy</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">run</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#run">run</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#usage">Usage</a></li>
        
            <li><a class="toctree-l4" href="#options">Options</a></li>
        
            <li><a class="toctree-l4" href="#example">Example</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../tasks/">tasks</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Plugins</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../plugins/core/">core</a>
                </li>
                <li class="">
                    
    <a class="" href="../../plugins/bundler/">bundler</a>
                </li>
                <li class="">
                    
    <a class="" href="../../plugins/env/">env</a>
                </li>
                <li class="">
                    
    <a class="" href="../../plugins/git/">git</a>
                </li>
                <li class="">
                    
    <a class="" href="../../plugins/nvm/">nvm</a>
                </li>
                <li class="">
                    
    <a class="" href="../../plugins/puma/">puma</a>
                </li>
                <li class="">
                    
    <a class="" href="../../plugins/rails/">rails</a>
                </li>
                <li class="">
                    
    <a class="" href="../../plugins/rbenv/">rbenv</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../tutorials/deploying-rails-from-scratch/">Deploying Rails From Scratch</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tutorials/writing-custom-tasks/">Writing Custom Tasks</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tutorials/publishing-a-plugin/">Publishing a Plugin</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">API</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../api/Host/">Tomo::Host</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/Logger/">Tomo::Logger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/Paths/">Tomo::Paths</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/PluginDSL/">Tomo::PluginDSL</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/Remote/">Tomo::Remote</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/Result/">Tomo::Result</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/TaskLibrary/">Tomo::TaskLibrary</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/testing/MockPluginTester/">Tomo::Testing::MockPluginTester</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/testing/DockerPluginTester/">Tomo::Testing::DockerPluginTester</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Tomo</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Commands &raquo;</li>
        
      
    
    <li>run</li>
    <li class="wy-breadcrumbs-aside">
      
          <a href="https://github.com/mattbrictson/tomo/edit/master/docs/commands/run.md" class="icon icon-github"
          > Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="run">run</h1>
<p>Run a specific remote task from the current project.</p>
<h2 id="usage">Usage</h2>
<pre><code class="plain">$ tomo run [--dry-run] [options] [--] TASK [ARGS...]
</code></pre>

<p>Remotely run one specified TASK, optionally passing ARGS to that task. For example, if this project uses the <a href="../../plugins/rails/">rails plugin</a>, you could run:</p>
<pre><code class="plain">$ tomo run -- rails:console --sandbox
</code></pre>

<p>This will run the <a href="../../plugins/rails/#railsconsole">rails:console</a> task on the host specified in <code>.tomo/config.rb</code> <a href="../../configuration/">configuration file</a>, and will pass the <code>--sandbox</code> argument to that task. The <code>--</code> is used to separate tomo options from options that are passed to the task. If a task does not accept options, the <code>--</code> can be omitted, like this:</p>
<pre><code class="plain">$ tomo run core:clean_releases
</code></pre>

<p>When you specify a task name, the <code>run</code> command is implied and can be omitted, so this works as well:</p>
<pre><code class="plain">$ tomo core:clean_releases
</code></pre>

<p>You can run any task defined by plugins loaded by the <a href="../../configuration/#pluginname_or_relative_path">plugin</a> declarations in <code>.tomo/config.rb</code>. To see a list of available tasks, run the <a href="../tasks/">tasks</a> command.</p>
<p>During the <code>run</code> command, tomo will initialize the <code>:release_path</code> setting to be equal to the current symlink (i.e. <code>/var/www/my-app/current</code>). This means that the task will run within the current release.</p>
<h2 id="options">Options</h2>
<table>
<thead>
<tr>
<th>Option</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>--[no-]privileged</code></td>
<td>Run the task using a privileged user (e.g. root). This user is configured <a href="../../configuration/#hostaddress-4242options">per host</a>.</td>
</tr>
<tr>
<td><code>-e ENVIRONMENT</code>, <code>--environment ENVIRONMENT</code></td>
<td>If the configuration contains multiple <a href="../../configuration/#environmentname-block">environments</a>, specify the ENVIRONMENT that should be used (e.g. production). The host(s) and settings can be different per environment.</td>
</tr>
<tr>
<td><code>-s NAME=VALUE</code>, <code>--setting NAME=VALUE</code></td>
<td>Override the setting NAME with the given VALUE. Refer to the <a href="../../configuration/#overrides">settings overrides</a> documentation for a detailed explanation.</td>
</tr>
<tr>
<td><code>--[no-]dry-run</code></td>
<td>Simulate running tasks instead of using real SSH.</td>
</tr>
<tr>
<td><code>-c PATH</code>, <code>--config PATH</code></td>
<td>Override the PATH where the <a href="../../configuration/">configuration</a> file is loaded from. (Default: <code>.tomo/config.rb</code>).</td>
</tr>
<tr>
<td><code>--[no-]color</code></td>
<td>By default, tomo automatically determines whether to use color output based on the capabilities of the terminal. Use this option to override this behavior and force tomo to enable or disable color output.</td>
</tr>
<tr>
<td><code>--[no-]debug</code></td>
<td>Enables verbose logging output that is helpful for troubleshooting. This includes runtime information such as the environment variables on the remote host and all tomo settings. Each SSH command executed by tomo is also logged in detail.</td>
</tr>
<tr>
<td><code>--[no-]trace</code></td>
<td>Normally if a tomo command fails, a concise and helpful error message is printed. If <code>--trace</code> is specified, tomo will also print the full backtrace.</td>
</tr>
<tr>
<td><code>-h</code>, <code>--help</code></td>
<td>Prints the help for this tomo command, similar to what you see on this page.</td>
</tr>
</tbody>
</table>
<h2 id="example">Example</h2>
<p>Given the following configuration:</p>
<pre><code class="ruby">plugin &quot;bundler&quot;
plugin &quot;puma&quot;
host &quot;deployer@localhost&quot;, port: 32811
</code></pre>

<p>Then we could run <a href="../../plugins/puma/#pumarestart">puma:restart</a> like this:</p>
<pre><code class="plain">$ tomo run puma:restart
tomo run v0.1.0
→ Connecting to deployer@localhost:32811
• puma:restart
cd /var/www/rails-new/current &amp;&amp; bundle exec pumactl --control-url tcp://127.0.0.1:9293 --control-token tomo restart
Command restart sent success
✔ Ran puma:restart on deployer@localhost:32811
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tasks/" class="btn btn-neutral float-right" title="tasks">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../deploy/" class="btn btn-neutral" title="deploy"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/mattbrictson/tomo/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../deploy/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../tasks/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
