<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>bundler - Tomo</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">
  <link href="../../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "bundler";
    var mkdocs_page_input_path = "plugins/bundler.md";
    var mkdocs_page_url = null;
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js" defer></script>
  <script src="../../js/modernizr-2.8.3.min.js" defer></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Tomo</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../comparisons/">Comparisons</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../configuration/">Configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Commands</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../commands/init/">init</a>
                </li>
                <li class="">
                    
    <a class="" href="../../commands/setup/">setup</a>
                </li>
                <li class="">
                    
    <a class="" href="../../commands/deploy/">deploy</a>
                </li>
                <li class="">
                    
    <a class="" href="../../commands/run/">run</a>
                </li>
                <li class="">
                    
    <a class="" href="../../commands/tasks/">tasks</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Plugins</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../core/">core</a>
                </li>
                <li class=" current">
                    
    <a class="current" href="./">bundler</a>
    <ul class="subnav">
            
    <li class="toctree-l3"><a href="#bundler">bundler</a></li>
    
        <ul>
        
            <li><a class="toctree-l4" href="#settings">Settings</a></li>
        
            <li><a class="toctree-l4" href="#tasks">Tasks</a></li>
        
            <li><a class="toctree-l4" href="#helpers">Helpers</a></li>
        
        </ul>
    

    </ul>
                </li>
                <li class="">
                    
    <a class="" href="../env/">env</a>
                </li>
                <li class="">
                    
    <a class="" href="../git/">git</a>
                </li>
                <li class="">
                    
    <a class="" href="../nodenv/">nodenv</a>
                </li>
                <li class="">
                    
    <a class="" href="../puma/">puma</a>
                </li>
                <li class="">
                    
    <a class="" href="../rails/">rails</a>
                </li>
                <li class="">
                    
    <a class="" href="../rbenv/">rbenv</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">Tutorials</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../tutorials/deploying-rails-from-scratch/">Deploying Rails From Scratch</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tutorials/writing-custom-tasks/">Writing Custom Tasks</a>
                </li>
                <li class="">
                    
    <a class="" href="../../tutorials/publishing-a-plugin/">Publishing a Plugin</a>
                </li>
    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">API</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../../api/Host/">Tomo::Host</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/Logger/">Tomo::Logger</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/Paths/">Tomo::Paths</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/PluginDSL/">Tomo::PluginDSL</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/Remote/">Tomo::Remote</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/Result/">Tomo::Result</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/TaskLibrary/">Tomo::TaskLibrary</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/testing/MockPluginTester/">Tomo::Testing::MockPluginTester</a>
                </li>
                <li class="">
                    
    <a class="" href="../../api/testing/DockerPluginTester/">Tomo::Testing::DockerPluginTester</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Tomo</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
        
          <li>Plugins &raquo;</li>
        
      
    
    <li>bundler</li>
    <li class="wy-breadcrumbs-aside">
      
          <a href="https://github.com/mattbrictson/tomo/edit/master/docs/plugins/bundler.md" class="icon icon-github"
          > Edit on GitHub</a>
      
    </li>
  </ul>
  
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="bundler">bundler</h1>
<p>The bundler plugin installs ruby gem dependencies using bundler. This is required for deploying Rails apps. It also provides conveniences for using <code>bundle exec</code>.</p>
<h2 id="settings">Settings</h2>
<p>Note that the settings listed here only take effect if you run the <a href="#bundlerconfig">bundler:config</a> task.</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Purpose</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>bundler_config_path</code></td>
<td>Location where the <a href="#bundlerconfig">bundler:config</a> task will write bundler&rsquo;s configuration file</td>
<td><code>".bundle/config"</code></td>
</tr>
<tr>
<td><code>bundler_deployment</code></td>
<td>Enables bundler&rsquo;s <a href="https://bundler.io/v2.0/man/bundle-install.1.html#DEPLOYMENT-MODE">deployment mode</a> (strongly recommended)</td>
<td><code>true</code></td>
</tr>
<tr>
<td><code>bundler_gemfile</code></td>
<td>Optionally used to override the location of the Gemfile</td>
<td><code>nil</code></td>
</tr>
<tr>
<td><code>bundler_jobs</code></td>
<td>Amount of concurrency used when downloading/installing gems</td>
<td><code>"4"</code></td>
</tr>
<tr>
<td><code>bundler_path</code></td>
<td>Directory where gems where be installed</td>
<td><code>"%{shared_path}/bundle"</code></td>
</tr>
<tr>
<td><code>bundler_retry</code></td>
<td>Number of times to retry installing a gem if it fails to download</td>
<td><code>"3"</code></td>
</tr>
<tr>
<td><code>bundler_version</code></td>
<td>The version of bundler to install, used by the <a href="#bundlerupgrade_bundler">bundler:upgrade_bundler</a> task; if <code>nil</code> (the default), determine the version based on <code>Gemfile.lock</code></td>
<td><code>nil</code></td>
</tr>
<tr>
<td><code>bundler_without</code></td>
<td>Array of Gemfile groups to exclude from installation</td>
<td><code>["development", "test"]</code></td>
</tr>
</tbody>
</table>
<h2 id="tasks">Tasks</h2>
<h3 id="bundlerupgrade_bundler">bundler:upgrade_bundler</h3>
<p>Installs the version of bundler specified by the <code>:bundler_version</code> setting, if specified. If <code>:bundler_version</code> is <code>nil</code> (the default), this task will automatically determine the version of bundler required by the app that is being deployed by looking at the <code>BUNDLED WITH</code> entry within the appâ€™s <code>Gemfile.lock</code>. If <code>:bundler_version</code> is <code>nil</code> and the app is missing a lockfile, then this task does nothing. Bundler will be installed withing this command:</p>
<pre><code>gem install bundler --conservative --no-document -v VERSION
</code></pre>

<p><code>bundler:upgrade_bundler</code> is intended for use as a <a href="../../commands/setup/">setup</a> task. It should be run prior to <a href="#bundlerinstall">bundler:install</a> to ensure that the correct version bundler is present.</p>
<h3 id="bundlerconfig">bundler:config</h3>
<p>Writes a <code>.bundle/config</code> file with the configuration specified by the various <code>:bundler_*</code> tomo settings. This ensures that invocations of <code>bundle check</code>, <code>bundle install</code>, and most importantly <code>bundle exec</code> all consistently use the correct bundler configuration.</p>
<p><code>bundler:config</code> is intended for use as a <a href="../../commands/setup/">setup</a> task. It should be run prior to <a href="#bundlerinstall">bundler:install</a> so that gems are installed in the proper location.</p>
<h3 id="bundlerinstall">bundler:install</h3>
<p>Runs <code>bundle install</code> to download and install all the dependencies specified by the Gemfile of the app that is being deployed. As a performance optimization, this task will run <code>bundle check</code> first to see if the appâ€™s dependencies have already been installed. If so, <code>bundle install</code> is skipped.</p>
<p><code>bundler:install</code> is intended for use as a <a href="../../commands/deploy/">deploy</a> task. It should be run prior to any tasks that rely on gems.</p>
<h3 id="bundlerclean">bundler:clean</h3>
<p>Runs <code>bundle clean</code> to delete any previously installed gems that are no longer needed by the current version of the app. Cleaning is generally good practice to save disk space and speed up app launch time.</p>
<p><code>bundler:clean</code> is intended for use as a <a href="../../commands/deploy/">deploy</a> task. It should be run at the conclusion of the deploy after all other tasks.</p>
<h2 id="helpers">Helpers</h2>
<p>These helper methods become available on instances of <a href="../../api/Remote/">Remote</a> when the bundler plugin is loaded. They accept the same <code>options</code> as <a href="../../api/Remote/#run42command-4242options-tomoresult">Remote#run</a>.</p>
<h3 id="remotebundleargs-options-tomoresult">remote.bundle(*args, **options) â†’ <a href="../../api/Result/">Tomo::Result</a></h3>
<p>Runs <code>bundle</code> within <code>release_path</code> by default.</p>
<pre><code class="ruby">remote.bundle(&quot;exec&quot;, &quot;rails&quot;, &quot;console&quot;)
# $ cd /var/www/my-app/current &amp;&amp; bundle exec rails console
</code></pre>

<h3 id="remotebundleargs-options-true-or-false">remote.bundle?(*args, **options) â†’ true or false</h3>
<p>Same as <code>bundle</code> but returns <code>true</code> if the command succeeded, <code>false</code> otherwise.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../env/" class="btn btn-neutral float-right" title="env">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../core/" class="btn btn-neutral" title="core"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/mattbrictson/tomo/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../core/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../env/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js" defer></script>
      <script src="../../search/main.js" defer></script>

</body>
</html>
